{
  "lex": {
    "macros": {
      "ALPHA": "[A-WYZ]|[a-z]",
      "CLRF": "\\n",
      "CONTROL": "[\\x00-\\x08]|[\\x0A-\\x1F]|\\x7F",
      "DIGIT": "[0-9]",
      "DQUOTE": "\\x22",
      "SAFE": "!|[\\x23-\\x2B]|[\\x2D-\\x39]|[\\x3C-\\x40]|[\\x5B-\\x60]|[\\x7B-\\x7E]",
      "UTF8-2": "[\\xC2-\\xDF][\\x80-\\xBF]",
      "UTF8-3": "\\xE0[\\xA0-\\xBF][\\x80-\\xBF]|[\\xE1-\\xEC][\\x80-\\xBF]{2}|\\xED[\\x80-\\x9F][\\x80-\\xBF]|[\\xEE-\\xEF][\\x80-\\xBF]{2}",
      "UTF8-4": "\\xF0[\\x90-\\xBF][\\x80-\\xBF]{2}|[\\xF1-\\xF3][\\x80-\\xBF]{3}|\\xF4[\\x80-\\x8F][\\x80-\\xBF]{2}",
      "WSP": "\\s"
    },

    "rules": [
      [":", "return 'COLON';"],
      [",", "return 'COMMA';"],
      ["-", "return 'DASH';"],
      ["=", "return 'EQUALS';"],
      [";", "return 'SEMICOLON';"],
      ["X", "return 'X';"],
      ["{ALPHA}", "return 'ALPHA';"],
      ["{CLRF}", "return 'CLRF';"],
      ["{CONTROL}", "return 'CONTROL';"],
      ["{DIGIT}", "return 'DIGIT';"],
      ["{DQUOTE}", "return 'DQUOTE';"],
      ["{SAFE}", "return 'SAFE';"],
      ["{UTF8-2}", "return 'NON-US-ASCII';"],
      ["{UTF8-3}", "return 'NON-US-ASCII';"],
      ["{UTF8-4}", "return 'NON-US-ASCII';"],
      ["{WSP}", "return 'WSP';"],
      ["$", "return 'EOF';"]
    ]
  },

  "bnf": {
    "file": [
      ["contentLines EOF", "return $1;"]
    ],
    "contentLines": [
      ["contentLine", "return $1;"],
      ["contentLines contentLine", "return $1.concat($2);"]
    ],
    "contentLine": [
      ["name COLON value CLRF", "return { name: $1, value: $3 };"],
      ["name paramList COLON value CLRF", "return { name: $1, paramList: $2, value: $4 };"]
    ],
    "name": [
      ["ianaToken", "return $1;"],
      ["xname", "return $1;"]
    ],
    "paramList": [
      ["SEMICOLON param", "return $2;"],
      ["SEMICOLON param paramList", "return $3.concat($2);"]
    ],
    "value": [
      ["", "return null;"],
      ["valueString", "return $1;"]
    ],
    "ianaToken": [
      ["alphanumericish", "return $1;"]
    ],
    "xname": [
      ["X DASH alphanumericish", "$1 + $2 + $3"]
    ],
    "alpha": [
      ["ALPHA", "return $1;"],
      ["X", "return $1;"]
    ],
    "alphanumeric": [
      ["alpha", "return $1;"],
      ["DIGIT", "return $1;"],
      ["alpha alphanumeric", "return $2.concat($1);"],
      ["DIGIT alphanumeric", "return $2.concat($1);"]
    ],
    "alphanumericish": [
      ["alpha", "return $1;"],
      ["DASH", "return $1;"],
      ["DIGIT", "return $1;"],
      ["alpha alphanumericish", "return $2.push($1);"],
      ["DASH alphanumericish", "return $2.push($1);"],
      ["DIGIT alphanumericish", "return $2.push($1);"]
    ],
    "param": [
      ["paramName EQUALS paramValues", "return { paramName: $1, paramValues: $3 };"]
    ],
    "paramName": [
      ["ianaToken", "return $1;"],
      ["xname", "return $1;"]
    ],
    "paramValues": [
      ["paramValue", "return $1;"],
      ["paramValue COMMA paramValues", "return $3.concat($1);"]
    ],
    "paramValue": [
      ["paramText", "return $1;"],
      ["quotedString", "return $1;"]
    ],
    "paramText": [
      ["", "return null;"],
      ["safeString", "return null;"]
    ],
    "quotedString": [
      ["DQUOTE DQUOTE", "return null;"],
      ["DQUOTE qSafeString DQUOTE", "return $2;"]
    ],
    "safeString": [
      ["safeChar", "return $1"],
      ["safeChar safeString", "return $2.concat($1);"]
    ],
    "safeChar": [
      ["NON-US-ASCII", "return $1;"],
      ["SAFE", "return $1;"],
      ["WSP", "return $1;"],
      ["alpha", "return $1;"]
    ],
    "qSafeString": [
      ["qSafeChar", "return $1;"],
      ["qSafeChar qSafeString", "return $2.concat($1);"]
    ],
    "qSafeChar": [
      ["COLON", "return $1;"],
      ["COMMA", "return $1;"],
      ["SEMICOLON", "return $1;"],
      ["safeChar", "return $1;"]
    ],
    "valueString": [
      ["valueChar", "return $1;"],
      ["valueChar valueString", "return $2.concat($1);"]
    ],
    "valueChar": [
      ["CONTROL", "return $1;"],
      ["DQUOTE", "return $1;"],
      ["qSafeChar", "return $1;"]
    ]
  }
}
